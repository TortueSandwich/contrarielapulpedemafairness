name: Nettoyage des notebooks

on:  # D√©clencheur : quand on pousse du code ou ouvre une PR
  pull_request:
  push:
    branches:
      - main  # Change √ßa si ton branch principal a un autre nom

jobs:
  clean_notebooks:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout du repo
        uses: actions/checkout@v4

      - name: Installer Python et nbstripout
        run: |
          python -m pip install --upgrade pip
          pip install nbstripout

      - name: Appliquer nbstripout √† tous les notebooks
        run: |
          find . -name "*.ipynb" -exec nbstripout {} \;

      - name: Commit des notebooks nettoy√©s
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git commit -am "üßπ Auto-nettoyage des notebooks" || echo "Aucun changement d√©tect√©"
          git push || echo "Rien √† pousser"
